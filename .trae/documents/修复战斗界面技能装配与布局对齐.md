## 问题复盘
- 模板中调用 `openSkillDialog`，但脚本未定义或未导出，导致 `TypeError: _ctx.openSkillDialog is not a function`。
- 技能选择采用输入框+下拉列表的形式，不便于查看技能详情；需要改为按钮+弹窗选择。
- 切换武将按钮与“主将/副将”标识需要同一行对齐。

## 修改点
### 模板（BattleSim.vue）
1. 武将卡顶部：在每张卡最上方新增一行 `top-row`，左侧放“切换武将”按钮，右侧放 `el-tag` 显示“主将/副将”。
2. 技能选择：
   - 自带战法用一条只读色块 `skill-pill innate` 显示名称。
   - 第二、第三技能改为单个按钮 `el-button`：未选择时显示“选择战法”灰色背景；选择后显示技能名并使用高亮背景。
   - 在页面底部新增“选择战法”弹窗（`el-dialog`），支持搜索，列表显示 `名称/类型/效果/描述`，点击“选择”即回填按钮名称。

### 脚本（BattleSim.vue）
1. 引入并使用 `computed`。
2. 新增技能弹窗状态与方法：
   - `skillDialogVisible`, `skillSearch`, `skillTargetTeam`, `skillTargetIndex`, `skillTargetPos`。
   - `filteredSkills = computed(...)`，按名称或ID过滤技能。
   - `openSkillDialog(team, idx, pos)` 打开弹窗并记录目标位置。
   - `chooseSkill(row)` 将 `{cfgId, name}` 写入 `teamX.generals[idx].skills[pos]` 并关闭弹窗。
3. 保留并复用已存在的武将选择弹窗逻辑（`openGeneralDialog`/`chooseGeneral`）。

### 样式（BattleSim.vue）
- `.top-row { display:flex; align-items:center; gap:8px; }` 对齐按钮与标签。
- `.skill-row { margin-top:6px; }` 控制两个技能按钮的行距。
- `.skill-btn { width:100%; }` 按钮占满技能行宽度。
- `.skill-pill.innate { background:#fff7e6; border:1px solid #ffd591; color:#ad6800; }` 自带战法色块。
- 未选技能按钮使用 `type="default" + plain` 呈现灰色背景；选中后使用 `type="primary"` 高亮。

## 验证
- 进入模拟战斗页，点击技能按钮弹出战法选择弹窗，无报错（`openSkillDialog` 已定义）。
- 选择战法后按钮显示技能名称且背景变更；自带战法显示为色块。
- 顶部“切换武将”与“主将/副将”标签同一行对齐。

## 影响范围与兼容
- 仅变更 `BattleSim.vue`；不影响其他页面与接口。
- 保留现有随机武将填充与战斗调用逻辑。

确认后我将按上述方案更新 `BattleSim.vue` 的模板、脚本和样式，确保修复报错并优化交互与布局。